[TOC]

## 1. CUT

- cut用来提取文本中的某一部分文本
- cut [选项] 文件名
  - -f 列号，用来指定要提取的列
  - -d 分隔符，按照指定分隔符分割列,默认分隔符是TAB制表符

```shell
// test
/*
姓名:年龄:性别
张三:24:男
李四:22:女
*/
cat test | cut -f 1,3 -d : 
/*
| 管道符号
以 : 分割 选取第1列和第7列输出

姓名:性别
张三:男
李四:女
*/
```

## 2.printf 

- 按规定格式输出
- printf 输出类型 输出内容

| 参数  | 含义                                                         |
| :---- | :----------------------------------------------------------- |
| %ns   | 输出字符串,n是数字指代输出几个字符                           |
| %ni   | 输出整数,n是指输出几个数字                                   |
| %m.nf | 输出浮点数,m和n是数字，指代输出的整数位数和小数位数，如%6.2f代表输出6位位，2位小数，4位整数 |

```shell
printf "%s\t%s\t%s\t%s\t%s\t\%s\n" $(df -h | grep /dev/vda1) | cut -f 1,5
```

## 3. awk 

- awk可以正确截取制表符和空格
- awk '条件1{动作1} 条件2{动作2}...' 文件名
- 条件(Pattern)
  - 一般使用关系表达式作为条件
  - x > 10 判断变量x是否大于10
  - x >=10 大于等于
  - x <=10 小于等于
- 动作(Action)
  - 格式化输出
- $0 整行 $1 第一列...

```shell
df -h | grep /dev/vda1 |awk '{print $5}'| cut -d '%' -f 1
// df -h  输出磁盘文件信息
// grep 过滤出 含有/dev/vda1 字符的一行
// awk 自动识别空格分隔 选取第五列 10%
// cut -d '%' -f 1 以百分号%分割 选取第一列 最终输出 10 
```

### 3.1 begin  end 

- awk可以正确截取制表符和空格
- begin 在所有的输出之前打印
- end 在所有的输出之后打印

```shell
awk 'BEGIN{print "开始"}END{print "结束"} {print $1}' test
```

### 3.2 FS 

- Field Separator，字段分隔符

```shell
awk 'BEGIN{FS=":"}{print $1"\t"$2}' /etc/passwd
```

### 3.3 NR 

- NR,表示awk开始执行程序后所读取的数据行数
- 输出数据序号

```shell
awk '{print NR,$0}' test
/*
1 姓名:年龄:性别
2 张三:24:男
3 李四:22:女
*/
```

### 3.4 声明变量

numbers.txt

```js
1
2
3
```

```shell
awk 'BEGIN{sum=0}{sum=sum+$1}END{print sum}' numbers.txt  // 6 
```

### 3.5 OFS

- OFS Out of Field Separator，输出字段分隔符

```shell
echo "i love you" | awk 'BEGIN{ FS=" ";OFS="-" }{print $1,$2,$3}' // i-love-you
```

## 4. sed命令

- sed是一个轻量级编辑器，主要用来对数据进行选取、替换、替换和新增操作
- sed [选项] '[动作]' 文件名
- 默认sed不会改变原文件 添加 -i  直接改变源文件

### 4.1 动作

| 参数 | 含义                                                         | 示例                         |
| :--- | :----------------------------------------------------------- | :--------------------------- |
| a    | 追加，在每一行或者指定行下面添加一行或多行                   | `sed '1a newline' test`      |
| c    | 行替换，用c后面的字符串替换掉原始整个数据行                  | `sed 'c newline' test        |
| s    | 字符串替换,用一个字符串替换另外一个字符串，格式为 "行范围s/旧字符串/新字符串/g" | `sed '3s/lisi/lisisi/g' test |
| i    | 插入，在当前行插入一行或多行                                 | `sed '1i newline' test       |
| d    | 删除指定的行                                                 | `sed '1,2d' test             |
| p    | 打印,输出指定的行                                            | sed -n '2p'  test            |

### 4.2 选项

| 参数 | 含义                                                         | 示例                                     |
| :--- | :----------------------------------------------------------- | :--------------------------------------- |
| -n   | 一般sed命令会把所有的数据都输出到屏幕上，如果加入此选项则只会把处理过的行输出到屏幕上 | `sed -n '2p' score.txt`                  |
| -e   | 允许对输入数据应用多条sed编辑命令                            | `sed -e 's/91/92/g;s/81/82/g' score.txt` |
| -i   | 用sed的修改直接修改编辑的文件，而不是在屏幕上输出            | sed -i '1i newline' score.txt            |

### 5. 排序命令sort

- sort [选项] 文件名
- 选项

| 选项     | 含义                                                         |                                     |
| :------- | :----------------------------------------------------------- | ----------------------------------- |
| -f       | 忽略大小写                                                   | sort -f -t ":" -n -k 5,5 number.txt |
| -n       | 以数值型进行排序，默认使用字符串顺序                         | sort -t ":" -n -k 3,3 number.txt    |
| -r       | 反向排序，默认从小到大                                       | sort -r /etc/passwd                 |
| -t       | 指定分割符，默认分割符是制表符                               | sort -t ":" -k 3,3 number.txt       |
| -k n[,m] | 按照指定的字段范围排序。从第n个字段开始，到第m个字段结束，默认是到行尾 | sort -t ":" -k 3,3 number.txt       |

```js
/*
number.txt
1
2
3
*/

sort number.txt   // 1 2 3
sort -r number.txt // 3 2 1
```

### 6. wc

- wc [选项] 文件名

| 选项 | 含义         |
| :--- | :----------- |
| -l   | 只统计行数   |
| -w   | 只允许单词数 |
| -m   | 只统计字符数 |

```shell
wc wc.txt 
```

